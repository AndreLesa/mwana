{% extends "layout.html" %}

{% block stylesheets %}
{{ block.super }}
<link href='http://fonts.googleapis.com/css?family=Junge' rel='stylesheet' type='text/css'>
<link type="text/css" rel="stylesheet" href="{{ MEDIA_URL }}smgl/css/statistics.css" />
<link type="text/css" rel="stylesheet" href="{{ MEDIA_URL }}smgl/css/smoothness/jquery-ui-1.9.1.custom.min.css">
<link rel="stylesheet" href="{{ STATIC_URL }}smgl/css/zcahrd_style.css">
<style type="text/css">
	#branding h1 a span{
		font-size: 1.6em;
		text-align:center;
	}

	#branding h1 a{
		float:none;
		text-align:center;
	}

	#branding h1 a:hover{
		text-decoration: none;
		text-align:center;
	}
	#intro-text P{
		font-family:'Junge' serif;
		font-size: 16px;
	}
	#map-canvas{
		width: 100%;
		height: 400px;
		margin-top:15px;
		margin-left: 10px;
	}
	#inner{
		padding:0;
	}

	#smgl_logo{
		background:url('{{ STATIC_URL }}smgl/images/smgl_logo.jpg') no-repeat 50% 50%;
		display:block;
		width:100%;
		height:75px;
	}

	#zcahrd_logo{
		background:url('{{ STATIC_URL }}smgl/images/zcahrd_logo.png') no-repeat 50% 50%;
		display:block;
		width:100%;
		height:75px;
	}

	#coat_of_arms{
		background:url('{{ STATIC_URL }}smgl/images/grz_coat_of_arms.png') no-repeat 50% 50%;
		display:block;
		width:100%;
		height:75px;
	}
</style>
{{ form.media.css }}

{% endblock %}

{% block javascripts %}
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAJlmUB29Ovc3xPkP9itrM0cNcAgk-SIwM&sensor=false"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script type="text/javascript">
	$(document).ready(function(e){
		$.get('/smgl', function(data){
			$('#birth-comp-chart').highcharts({
				credits:{
					enabled:false
				},
				title:{
					text: 'Common Obstetric Complications',
					style: {
						'font-weight':'bold',
						'text-decoration':'underline',
					}
				},
				tooltip:{
					pointFormat: '{series.name}: <b>{point.y} ({point.percentage:.1f}%)</b>'
				},
				subtitle:{
					text: 'Total Number: '+ data['num_mothers']
				},
				plotOptions:{
					pie:{
						size: "85%"
					}
				},
				series: [{
					type: 'pie',
					name: 'No. Mothers',
					data: data['conditions']
				}]
			});

			$('#ref-comp-chart').highcharts({
				credits:{
					enabled:false
				},
				title:{
					text: '<b>Common Referral Reasons</b>',
					style: {
						'font-weight':'bold',
						'text-decoration':'underline',
					}
				},
				tooltip:{
					pointFormat: '{series.name}: <b>{point.y} ({point.percentage:.1f}%)</b>'
				},
				subtitle:{
					text: 'Total Number: '+ data['num_ref_reasons']
				},
				plotOptions:{
					pie:{
						size: "85%"
					}
				},
				series: [{
					type: 'pie',
					name: 'No. Mothers',
					data: data['ref_reasons'].sort(function(a,b){
						return a[0].length - b[0].length })
						//The sort is needed to push the longer labels to the si
						//de of the screen with more space
				}]
			});
		});
	});

	var map;
	function initialize(){
		var mapOptions = {
			center: new google.maps.LatLng(-17.033397, 26.48502),
			zoom:14
		};
		var map = new google.maps.Map(document.getElementById('map-canvas'),
		mapOptions);
	};
	google.maps.event.addDomListener(window, 'load', initialize);
</script>

{% endblock %}

{% block content %}
<div class="container-fluid">
	<div class="row-fluid">
		<img src="{{ STATIC_URL }}smgl/images/mubumi_logo.png" id="header-image"/>
	</div>
	<div class="row-fluid">
		<div class="col-xs-10 col-xs-offset-1" id="intro-text">
			<p>The birth of a baby is a central event to human nature, and one that has a great impact on
				the life of women and their families. Remarkable progresses were made over the last century
				in the safety and comfort of human labour and birth, but this area has been receiving less attention
				in more recent times.
				</p>
		</div>
	</div>
	<div class="row-fluid">
		<div class="col-xs-7">
			<div class="row-fluid" id="images">
				<div class="col-xs-4" style="padding-right:0;">
					<div id="left-image" class="btn btn-default">
						<h3 class="image-text">Antenatal</h3>
						<img src="{{ STATIC_URL }}smgl/images/antenatal.png" class="nav-image"/>
					</div>
				</div>
				<div class="col-xs-4" style="padding-right:0;">
					<div class="row-fluid">
						<div class="btn btn-default" id="middle-top-image">
							<h3 class="image-text">Intrapartum</h3>
							<img src="{{ STATIC_URL }}smgl/images/intra.png" class="nav-image"/>
						</div>
					</div>
					<div class="row-fluid">
						<div class="btn btn-default" id="middle-bottom-image">
							<h3  class="image-text">Emergencies</h3>
							<img src="{{ STATIC_URL }}smgl/images/emerg.png" class="nav-image" />
						</div>
					</div>
				</div>
				<div class="col-xs-4" style="padding-right:0;">
					<div class="btn btn-default" id="right-image">
						<h3  class="image-text">Post Partum</h3>
						<img src="{{ STATIC_URL }}smgl/images/post_partum.png" class="nav-image"/>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xs-5">
			<div class="row-fluid">
				<div id="birth-comp-chart"></div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-7">
			<div id="map-canvas"></div>
		</div>
		<div class="col-xs-5">
			<div id="ref-comp-chart"></div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-2 col-xs-offset-3" id="footer-logos">
			<a href="http://www.savingmothersgivinglife.org/" id="smgl_logo" title="SMGL"></a>
		</div>
		<div class="col-xs-2">
			<a href="http://www.bu.edu/cghd/about-us/country-programs/zambia-country-program/" id="zcahrd_logo" title="ZCAHRD"></a>
		</div>
		<div class="col-xs-2">
			<a href="http://www.moh.gov.zm" id="coat_of_arms"  title="Zambia MOH"></a>
		</div>
	</div>

</div>
{% endblock %}
